<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>課程介紹 - 國際遊戲協會</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="bg-light py-3">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-5 d-flex justify-content-center">
                    <img src="img/logogif.gif" alt="Logo" class="img-fluid" style="max-width: 80px;">
                </div>
                <div class="col-md-7">
                    <nav class="d-flex justify-content-center">
                        <ul class="nav">
                            <li class="nav-item"><a class="nav-link" href="index.html">首頁</a></li>
                            <li class="nav-item"><a class="nav-link" href="about.html">關於我們</a></li>
                            <li class="nav-item"><a class="nav-link" href="member.html">成員介紹</a></li>
                            <li class="nav-item"><a class="nav-link" href="news.html">最新消息</a></li>
                            <li class="nav-item"><a class="nav-link" href="course.html">課程介紹</a></li>
                            <li class="nav-item"><a class="nav-link" href="contact.html">聯絡我們</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </header>

    <!-- Course Banner -->
    <div class="container-fluid">
        <img src="img/course-banner.jpg" alt="Banner" class="img-fluid w-100">
    </div>

    <!-- Course Information -->
    <section class="py-5">
        <div class="container">
            <h2 class="text-center text-warning mb-4">課程須知</h2>
            <p>歡迎加入我們遊戲學習的行列，為了讓您學習順利，請仔細閱讀下方條款，並熟悉學習規範：</p>
            
            <div class="accordion mb-5" id="courseAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button collapsed bg-primary text-white" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                            課程通知及未開成班通知
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#courseAccordion">
                        <div class="accordion-body">
                            <ol>
                                <li>本會課程皆以能開成班為前提，如無特殊狀況，最遲於開課前2至3天於本會網站公告上課時間與地點，不另行電話通知，敬請密切注意本會官網公告。
                                </li>
                                <li>課程如因「未達開班人數」或「其他原因」，而無法開班，將於開課日前2至3天前在本會網站公告，您可選擇辦理保留轉班或退費。</li>
                                <li>本會課程開班訊息及相關資訊，均以本會網站公告為準。</li>
                            </ol>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed bg-primary text-white" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            課程異動通知
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#courseAccordion">
                        <div class="accordion-body">
                            <ol>
                                <li>本會保留調整、修訂課程時間、上課地點及老師之權利，如不得已須異動時，異動資訊將在開課前2至3天公布至本會網站。</li>
                                <li>完成報名手續至上課前，課程資訊若有異動，請密切注意本會官網公告。不另以電話通知。</li>
                            </ol>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed bg-primary text-white" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            報名及退費
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#courseAccordion">
                        <div class="accordion-body">
                            <ol>
                                <li>報名時請以ATM轉帳<br>
                                    戶名:國際遊戲協會台灣分會<br>
                                    銀行代號： 007<br>
                                    帳號：17610028630<br>
                                    轉帳後請來電告知您的大名及帳號後5碼。                                    
                                </li>
                                <li>開課前二週取消上課退費者，退還已繳費用95%。開課前一週取消上課退費者，退還已繳費用75%。開課前5日內因須於課前備妥材料恕不退費。</li>
                                <li>無論退費原因為何，退費時，本會將扣除應退費總金額2%之ATM轉帳手續費。</li>
                                <li>請學員妥慎保管ATM轉帳繳費明細正本，必要時，憑正本辦理退費。</li>
                            </ol>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button collapsed bg-primary text-white" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                            其他注意事項
                        </button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#courseAccordion">
                        <div class="accordion-body">
                            <ol>
                                <li>上課時手機請關靜音，若需接聽電話時請到教室外，避免干擾課程進行。</li>
                                <li>如遇颱風，上課與否，依照電台或電視台播報政府之規定辦理，本會不另行個別通知。</li>
                                <li>本會不設旁聽席，不接受錄影、照相及攜帶寵物上課。</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <h2 class="text-center text-warning mb-4">最新課程</h2>
            <div class="col-md-12">                    
                <div class="row" id="course-container">
                    <!-- 這裡的內容將由 JavaScript 動態生成 -->
                </div>
            </div>           
        </div>
    </section>

    <!-- 課程詳情 Modal -->
    <div class="modal fade" id="courseDetailModal" tabindex="-1" aria-labelledby="courseDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="courseDetailModalLabel">課程詳情</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="courseDetailContent">
                    <!-- 這裡的內容將由 JavaScript 動態生成 -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">關閉</button>
                    <button type="button" class="btn btn-primary" id="enrollCourseBtn">報名課程</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 報名表單 Modal -->
    <div class="modal fade" id="enrollModal" tabindex="-1" aria-labelledby="enrollModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="enrollModalLabel">課程報名</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="enrollForm">
                        <input type="hidden" id="courseId" name="courseId">
                        <input type="hidden" id="courseName" name="courseName">
                        <div class="mb-3">
                            <label for="name" class="form-label">姓名</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>
                        <div class="mb-3">
                            <label for="phone" class="form-label">電話</label>
                            <input type="tel" class="form-control" id="phone" name="phone" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">聯絡信箱</label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="participants" class="form-label">報名人數</label>
                            <input type="number" class="form-control" id="participants" name="participants" min="1" value="1" onchange="calculateTotal()">
                        </div>
                        <div class="mb-3">
                            <label for="totalFee" class="form-label">費用計算</label>
                            <input type="text" class="form-control" id="totalFee" readonly>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" onclick="submitEnrollment()">確認送出</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 報名成功 Modal -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="successModalLabel">報名成功</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>您已成功報名課程，我們將盡快與您聯繫確認。</p>
                    <p>報名資訊已發送至您的電子郵件信箱。</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">確定</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.8/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.8/firebase-firestore-compat.js"></script>

    <script>
        // 課程資料（可以從後端 API 獲取）
        const courses = [
            {
                id: 1,
                title: "遊戲工作坊",
                image: "img/course1.jpg",
                teacher: "王老師",
                time: "2025年3月15日 14:00-16:00",
                price: 150, // 添加數值型價格，用於計算
                location: "台北市館前路一號",
                description: "本課程主要針對初學者，介紹基本的遊戲設計原則與實作練習。適合對遊戲設計有興趣的各年齡層學員參加。",
                content: "課程內容包括遊戲類型介紹、遊戲設計基本元素、遊戲測試與反饋收集等。參與者將在課程中進行多種實際操作，並完成一個簡單的遊戲設計。"
            },
            {
                id: 2,
                title: "遊藝師初階班",
                image: "img/course2.jpg",
                teacher: "李老師",
                time: "2025年4月5日 09:30-12:00",
                price: 2000,
                location: "新北市板橋區中正路435號",
                description: "針對想成為專業遊藝師的學員，提供全面基礎培訓，包含理論學習與實務操作。",
                content: "課程內容涵蓋遊戲與兒童發展的關係、遊藝活動設計原則、材料運用技巧、安全守則及初階帶領技巧等。完成課程後可獲得初階認證證書。"
            },
            {
                id: 3,
                title: "遊藝師中階班",
                image: "img/course3.jpg",
                teacher: "張老師",
                time: "2025年5月10日 13:30-16:30",
                price: 2500,
                location: "台北市信義區松高路一號",
                description: "適合已完成初階課程的學員，深入探討進階遊藝技巧與理論。",
                content: "課程將著重於複雜遊戲設計、活動流程掌控、團體動力應用、特殊需求兒童的遊戲規劃等。學員將有機會規劃並實際帶領一場完整的遊藝活動。"
            },
            {
                id: 4,
                title: "遊藝師高階班",
                image: "img/course4.jpg",
                teacher: "陳老師",
                time: "2025年6月20日 09:00-17:00",
                price: 3500,
                location: "新北市板橋區中正路435號",
                description: "為已完成中階課程的專業人士設計，提供高階技能培訓。",
                content: "課程內容包含創新遊戲開發、大型活動策劃與執行、跨文化遊戲設計、專業倫理與實務，以及遊藝教育理論的最新發展。完成課程後將獲得高階認證資格。"
            },
            {
                id: 5,
                title: "認證師資班",
                image: "img/course5.jpg",
                teacher: "林老師",
                time: "2025年7月15日 09:00-17:00 (連續三天)",
                price: 5000,
                location: "台北市松山區敦化北路100號",
                description: "專為有志於培訓未來遊藝師的資深專業人士設計的師資培訓課程。",
                content: "課程將全面培養學員的教學技巧，包括課程設計、教學方法論、評量技術、學習者心理學等。參與者需完成一個完整的課程設計與示範教學，通過評核後可獲得認證師資資格。"
            }
        ];

        // Firebase 配置
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // 初始化 Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Google Form URL
        const googleFormUrl = "YOUR_GOOGLE_FORM_URL";

        let currentCourse = null;

        // 動態生成課程卡片
        function renderCourses() {
            const courseContainer = document.getElementById('course-container');
            courseContainer.innerHTML = '';

            courses.forEach(course => {
                const courseCard = document.createElement('div');
                courseCard.className = 'col-md-3 mb-4';
                courseCard.innerHTML = `
                    <div class="card h-100" style="cursor: pointer;" onclick="showCourseDetail(${course.id})">
                        <img src="${course.image}" class="card-img-top" alt="${course.title}">
                        <div class="card-body">
                            <h5 class="card-title">${course.title}</h5>
                            <p class="card-text">
                                <small class="text-muted">授課教師: ${course.teacher}</small><br>
                                <small class="text-muted">上課時間: ${course.time}</small><br>
                                <small class="text-muted">課程費用: NT＄${course.price}</small>
                            </p>
                        </div>
                    </div>
                `;
                courseContainer.appendChild(courseCard);
            });
        }

        // 顯示課程詳情
        function showCourseDetail(courseId) {
            currentCourse = courses.find(c => c.id === courseId);
            if (!currentCourse) return;

            const modalTitle = document.getElementById('courseDetailModalLabel');
            const modalContent = document.getElementById('courseDetailContent');
            
            modalTitle.textContent = currentCourse.title;
            modalContent.innerHTML = `
                <div class="row">
                    <div class="col-md-6">
                        <img src="${currentCourse.image}" class="img-fluid" alt="${currentCourse.title}">
                    </div>
                    <div class="col-md-6">
                        <h5>課程資訊</h5>
                        <p><strong>授課教師:</strong> ${currentCourse.teacher}</p>
                        <p><strong>上課時間:</strong> ${currentCourse.time}</p>
                        <p><strong>課程費用:</strong> NT＄${currentCourse.price}</p>
                        <p><strong>上課地點:</strong> ${currentCourse.location}</p>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <h5>課程簡介</h5>
                        <p>${currentCourse.description}</p>
                        <h5>詳細內容</h5>
                        <p>${currentCourse.content}</p>
                    </div>
                </div>
            `;

            const modal = new bootstrap.Modal(document.getElementById('courseDetailModal'));
            modal.show();
        }

        // 報名課程按鈕點擊事件
        document.getElementById('enrollCourseBtn').addEventListener('click', function() {
            if (!currentCourse) return;
            
            // 關閉課程詳情 Modal
            const courseDetailModal = bootstrap.Modal.getInstance(document.getElementById('courseDetailModal'));
            courseDetailModal.hide();
            
            // 設置報名表單的課程相關資訊
            document.getElementById('courseId').value = currentCourse.id;
            document.getElementById('courseName').value = currentCourse.title;
            
            // 計算初始費用
            calculateTotal();
            
            // 顯示報名表單 Modal
            const enrollModal = new bootstrap.Modal(document.getElementById('enrollModal'));
            enrollModal.show();
        });

        // 計算總費用
        function calculateTotal() {
            const participants = parseInt(document.getElementById('participants').value) || 1;
            const totalFee = participants * currentCourse.price;
            document.getElementById('totalFee').value = `NT$${totalFee}`;
        }

        // 提交報名表單
        function submitEnrollment() {
            const enrollForm = document.getElementById('enrollForm');
            
            // 表單驗證
            if (!enrollForm.checkValidity()) {
                enrollForm.reportValidity();
                return;
            }
            
            const formData = {
                courseId: document.getElementById('courseId').value,
                courseName: document.getElementById('courseName').value,
                name: document.getElementById('name').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                participants: document.getElementById('participants').value,
                totalFee: document.getElementById('totalFee').value,
                enrollDate: new Date().toISOString(),
                courseTime: currentCourse.time,
                teacher: currentCourse.teacher
            };
            
            // 提交到 Google Form
            submitToGoogleForm(formData);
            
            // 儲存到 Firebase
            saveToFirebase(formData);
        }

        // 提交到 Google Form
        function submitToGoogleForm(data) {
            // 創建一個隱藏的表單來提交到 Google Form
            const form = document.createElement('form');
            form.action = googleFormUrl;
            form.method = 'POST';
            form.target = '_blank';
            form.style.display = 'none';

            // 根據 Google Form 的欄位名稱建立表單元素
            // 注意：這裡需要根據您實際的 Google Form 欄位名稱進行調整
            const entries = {
                'entry.123456789': data.courseName,
                'entry.234567890': data.name,
                'entry.345678901': data.phone,
                'entry.456789012': data.email,
                'entry.567890123': data.participants,
                'entry.678901234': data.totalFee,
                'entry.789012345': data.enrollDate
            };

            for (const entry in entries) {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = entry;
                input.value = entries[entry];
                form.appendChild(input);
            }

            document.body.appendChild(form);
            form.submit();
            document.body.removeChild(form);
        }

        // 儲存到 Firebase
        function saveToFirebase(data) {
            db.collection('enrollments').add(data)
                .then((docRef) => {
                    console.log('Document written with ID: ', docRef.id);
                    
                    // 關閉報名表單 Modal
                    const enrollModal = bootstrap.Modal.getInstance(document.getElementById('enrollModal'));
                    enrollModal.hide();
                    
                    // 清空表單
                    document.getElementById('enrollForm').reset();
                    
                    // 顯示成功訊息
                    const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                    successModal.show();
                })
                .catch((error) => {
                    console.error('Error adding document: ', error);
                    alert('報名提交時發生錯誤，請稍後再試或聯絡管理員。');
                });
        }

        // 頁面載入時渲染課程
        document.addEventListener('DOMContentLoaded', renderCourses);
    </script>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-3">
                    <div class="text-center">
                        <img src="img/logo-150x150.jpeg" alt="Logo" class="img-fluid mb-2" style="max-width: 100px;">
                    </div>
                    <p>遊戲 是最高形式的研究；樂育 是最高層次的學習。<br>
                        Play, is research in its highest form.<br>
                        Edutainment, is learning on its highest level.</p>
                </div>
                <div class="col-lg-4 mb-3">
                    <ul class="list-unstyled">
                        <li><i class="fa fa-map-marker"></i> 地址：220新北市板橋區中正路435號</li>
                        435藝文特區台灣玩具博物館
                        <li><i class="fa fa-fax"></i> 傳真：(02)8972-7185</li>
                        <li><i class="fa fa-envelope"></i> E-mail：<a href="mailto:ipat1071001@ipat.org.tw"
                                class="text-white">ipat1071001@ipat.org.tw</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 text-center mb-3">
                    <ul class="list-inline">
                        <li class="list-inline-item"><a
                                href="https://www.facebook.com/IPAT-International-Play-Association-Taiwan-Branch-106772071551600"
                                target="_blank" rel="noopener noreferrer"><img src="img/facebook.png" alt="Facebook"
                                    class="img-fluid" style="max-width: 30px;"></a></li>
                        <li class="list-inline-item"><a
                                href="https://line.me/ti/g2/ftLDwke6OMbboIQNbkGf4Q?utm_source=invitation&amp;utm_medium=link_copy&amp;utm_campaign=default"
                                target="_blank" rel="noopener noreferrer"><img src="img/line.png" alt="Line"
                                    class="img-fluid" style="max-width: 30px;"></a></li>
                        <li class="list-inline-item"><a href="https://twitter.com/ipataiwan1" target="_blank"
                                rel="noopener noreferrer"><img src="img/twitter.png" alt="Twitter" class="img-fluid"
                                    style="max-width: 30px;"></a></li>
                        <li class="list-inline-item"><a href="https://www.instagram.com/ipataiwan/" target="_blank"
                                rel="noopener noreferrer"><img src="img/IG.png" alt="Instagram" class="img-fluid"
                                    style="max-width: 30px;"></a></li>
                    </ul>
                </div>
            </div>
            <div class="text-center mt-3">
                <p>© Copyright 2025. 網頁設計 By Zero.Lin</p>
            </div>
        </div>
    </footer>

</body>

</html>
